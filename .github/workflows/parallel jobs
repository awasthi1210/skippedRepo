name: Parallel and Conditional Jobs

on:
  workflow_dispatch:

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    
    steps:
      - run: echo Run Build
      - name: Checkout Code
        uses: actions/checkout@v2
      
      - name: Setup JDK 11 for Sonar Cloud
        uses: actions/setup-java@v1
        with:
            java-version: 11
      
      - name: Maven Build
        run: mvn clean install -DskipTests=true
      
      - name: Run JUnit Tests
        run: mvn test -Dmaven.test.failure.ignore=true surefire-report:report

  test:
    name: Test
    runs-on: ubuntu-latest

    steps:
      - run: echo Run Test
      - name: Checkout Code
        uses: actions/checkout@v2
      
      - name: Setup JDK 11 for Sonar Cloud
        uses: actions/setup-java@v1
        with:
            java-version: 11
      
      - name: Maven Build
        run: mvn clean install -DskipTests=true

  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    needs: [build, test] # This job depends on 'build' and 'test' jobs
    steps:
      - run: echo Run Deploy
      - name: Checkout Code
        uses: actions/checkout@v2
      
      - name: Setup JDK 11 for Sonar Cloud
        uses: actions/setup-java@v1
        with:
            java-version: 11
      
      - name: Maven Build
        run: mvn clean install -DskipTests=true

  release:
    name: Release
    runs-on: ubuntu-latest
    needs: [build]

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
  
      - run: echo Finish release'

# Define a conditional job that runs only if 'test' job fails
  notify_failure:
    name: Notify on Failure
    runs-on: ubuntu-latest
    needs: [test]
    if: failure() # This job runs only if 'test' job fails

    steps:
      - name: Notify team on failure
        run: echo "Test job failed, please investigate."

# Define parallel jobs that run concurrently
  parallel_jobs:
    name: Parallel Jobs
    runs-on: ubuntu-latest
    needs: [build] # These jobs depend on 'build' job

    strategy:
      matrix:
        job1:
          name: Job 1
        job2:
          name: Job 2
        job3:
          name: Job 3
        job4:
          name: Job 4
        job5:
          name: Job 5
        job6:
          name: Job 6
        job7:
          name: Job 7
        job8:
          name: Job 8

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
  
      - name: Run parallel job
        run: |
          if [[ ${{ matrix.name }} == "Job 1" ]]; then
            echo "Running Job 1"
            # Commands for Job 1
          elif [[ ${{ matrix.name }} == "Job 2" ]]; then
            echo "Running Job 2"
            # Commands for Job 2
          elif [[ ${{ matrix.name }} == "Job 3" ]]; then
            echo "Running Job 3"
            # Commands for Job 3
          elif [[ ${{ matrix.name }} == "Job 4" ]]; then
            echo "Running Job 4"
            # Commands for Job 4
          elif [[ ${{ matrix.name }} == "Job 5" ]]; then
            echo "Running Job 5"
            # Commands for Job 5
          elif [[ ${{ matrix.name }} == "Job 6" ]]; then
            echo "Running Job 6"
            # Commands for Job 6
          elif [[ ${{ matrix.name }} == "Job 7" ]]; then
            echo "Running Job 7"
            # Commands for Job 7
          elif [[ ${{ matrix.name }} == "Job 8" ]]; then
            echo "Running Job 8"
            # Commands for Job 8
          fi
